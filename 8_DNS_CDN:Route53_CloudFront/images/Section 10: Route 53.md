## DNS
- Domain Name Systemìœ¼ë¡œ ì‚¬ëŒì—ê²Œ ì¹œìˆ™í•œ í˜¸ìŠ¤íŠ¸ ì´ë¦„ì„ ëŒ€ìƒ ì„œë²„ IP ì£¼ì†Œë¡œ ë²ˆì—­í•´ì¤Œ
- URLê³¼ í˜¸ìŠ¤íŠ¸ ì´ë¦„ì„ IPë¡œ ë³€í™˜
- ê³„ì¸µì  naming structure
  ```
               .com
        example.com
    www.example.com
    api.example.com
  ```
#### DNS ê´€ë ¨ ìš©ì–´
- Domain Registrar: ë„ë©”ì¸ ì´ë¦„ì„ ë“±ë¡í•˜ëŠ” ê³³ (Amazon Route 53)
- DNS Records: A, AAAA, CNAME, NS
- Zone File: ëª¨ë“  DNS ë ˆì½”ë“œë¥¼ í¬í•¨
- Name Server: DNS ì¿¼ë¦¬ë¥¼ ì‹¤ì œë¡œ í•´ê²°í•˜ëŠ” ì„œë²„ 
- Top Level Domain (TLD): .com, .us, .in, .org
- Second Level Domain (SLD): .amazon.com, google.com
<br>

## Amazon Route 53
- ê³ ê°€ìš©ì„±, í™•ì¥ì„±ì„ ê°–ì¶˜ ì™„ì „íˆ ê´€ë¦¬ë˜ë©° *Authoritative*(ê¶Œí•œìˆëŠ”) DNS
  - Authoritative = the customer (you) can update the DNS records = DNSì— ëŒ€í•´ ì™„ì „íˆ ì œì–´í•  ìˆ˜ ìˆìŒ
- Route 53ì€ Domain Registrarë¡œ ë„ë©”ì¸ ì´ë¦„ì„ example.comìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ì—­í• ì„ í•¨
- Ability to check the health of your resources
- The only AWS service which provides 100% availability SLA
- 53ì€ DNS ì„œë¹„ìŠ¤, ì¦‰ ì´ë¦„ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì „í†µì ì¸ DNS í¬íŠ¸

### Route 53 - Records
- Each record contains:
  - Domain/subdomain Name - example.com
  - Record Type - A, AAAA
  - Value - 123.456.789.123
  - Routing Policy - how Route 53 responds to queries
  - TTL (Time To Live) - amount of time the record cached at DNS Resolvers 

### â­ï¸ Route 53 - Record Types
- A - maps a hostname to IPv4, í˜¸ìŠ¤íŠ¸ ì´ë¦„ê³¼ IPv4 IPë¥¼ ë§¤í•‘
- AAAA - maps a hostname to IPv6, í˜¸ìŠ¤íŠ¸ ì´ë¦„ê³¼ IPv6 IPë¥¼ ë§¤í•‘
- CNAME - í˜¸ìŠ¤íŠ¸ ì´ë¦„ì„ ë‹¤ë¥¸ í˜¸ìŠ¤íŠ¸ ì´ë¦„ê³¼ ë§¤í•‘ (ë³„ì¹­ ì—­í• )
  - ëŒ€ìƒ í˜¸ìŠ¤íŠ¸ ì´ë¦„ì€ Aë‚˜ AAAA ë ˆì½”ë“œê°€ ë  ìˆ˜ ìˆìŒ
  - Route 53ì—ì„œ DNS namespace ë˜ëŠ” Zone Apexì˜ ìƒìœ„ ë…¸ë“œì— ëŒ€í•œ CNAMEì„ ìƒì„±í•  ìˆ˜ ì—†ìŒ
  - e.g. example.comì— CNAMEì„ ë§Œë“¤ ìˆ˜ëŠ” ì—†ì§€ë§Œ www.example.comì— ëŒ€í•œ CNAME ë ˆì½”ë“œëŠ” ë§Œë“¤ ìˆ˜ ìˆìŒ
- NS - í˜¸ìŠ¤íŒ… ì¡´ì˜ ì´ë¦„ ì„œë²„, ì„œë²„ì˜ DNS ì´ë¦„ ë˜ëŠ” IP ì£¼ì†Œë¡œ í˜¸ìŠ¤íŒ… ì¡´ì— ëŒ€í•œ DNS ì¿¼ë¦¬ì— ì‘ë‹µí•  ìˆ˜ ìˆìŒ
  - íŠ¸ë˜í”½ì´ ë„ë©”ì¸ìœ¼ë¡œ ë¼ìš°íŒ… ë˜ëŠ” ë°©ì‹ì„ ì œì–´

### Route 53 - Hosted Zones
- ë ˆì½”ë“œì˜ ì»¨í…Œì´ë„ˆë¡œ ë„ë©”ì¸ê³¼ ì„œë¸Œë„ë©”ì¸ìœ¼ë¡œ ê°€ëŠ” íŠ¸ë˜í”½ì˜ ë¼ìš°íŒ… ë°©ì‹ì„ ì •ì˜
- Public Hosted Zones 
  - public domain name
  - í¼ë¸”ë¦­ ë„ë©”ì¸ì„ ì‚¬ë©´ í¼ë¸”ë¦­ í˜¸ìŠ¤íŒ… ì¡´ì„ ë§Œë“¤ ìˆ˜ ìˆìŒ
  - e.g.) example.com
- Private Hosted Zones
  - ê³µê°œë˜ì§€ ì•ŠëŠ” ë„ë©”ì¸ ì´ë¦„ì„ ì§€ì›, private domain name 
  - ì˜¤ì§ ê°€ìƒ í”„ë¼ì´ë¹— í´ë¼ìš°ë“œ(VPC)ë§Œì´ URLì„ ë¦¬ì¡¸ë¸Œí•  ìˆ˜ ìˆìŒ
  - e.g. ì‚¬ê¸°ì—…ì—ì„œ íšŒì‚¬ ë„¤íŠ¸ì›Œí¬ ë‚´ì—ì„œë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” URLì´ ìˆìŒ. internal.example.com
- have to pay $0.50 per month per hosted zone (ì›” 50ì„¼íŠ¸)
- í¼ë¸”ë¦­, í”„ë¼ì´ë¹— í˜¸ìŠ¤íŒ… ì¡´ì€ ë‘˜ ë‹¤ ë™ì¼í•˜ê²Œ ì‘ë™í•˜ì§€ë§Œ, public hosting zoneì€ ëˆ„êµ¬ë“  í•´ë‹¹ ë ˆì½”ë“œë¥¼ ì¿¼ë¦¬í•  ìˆ˜ ìˆìŒ (public recordë¥¼ ìœ„í•œ public hosting zone)   
    private hosting zoneì€ ì˜¤ì§ í”„ë¼ì´ë¹— ë¦¬ì†ŒìŠ¤, VPCì—ì„œë§Œ ì¿¼ë¦¬í•  ìˆ˜ ìˆìŒ   
    (ì¿¼ë¦¬ -> DNS ì¡°íšŒë¥¼ ì˜ë¯¸í•˜ë©°, ë„ë©”ì¸ ì´ë¦„(í˜¸ìŠ¤íŠ¸ ì´ë¦„)ì„ IP ì£¼ì†Œë¡œ ë³€í™˜í•˜ëŠ” ì‘ì—…)

### Route 53 - Records TTL (Time To Live)
- TTL ì‹œê°„ ë™ì•ˆ ìºì‹±í•¨
- DNS ìš”ì²­ ì¿¼ë¦¬ë¥¼ ê³„ì†í•´ì„œ ìì£¼ ë³´ë‚´ëŠ” ìƒí™©ì„ ì›ì¹˜ ì•ŠëŠ” ê²ƒ
- **High TTL** - TTLì„ 24ì‹œê°„ìœ¼ë¡œ ë†’ê²Œ ì„¤ì •í•œ ìƒí™©
  - Route 53ì˜ íŠ¸ë˜í”½ì€ í˜„ì €íˆ ì ì–´ì§
  - í´ë¼ì´ì–¸íŠ¸ê°€ ì˜¤ë˜ëœ ë ˆì½”ë“œë¥¼ ë°›ì„ ê°€ëŠ¥ì„±ì´ ìˆìŒ
- **Low TTL** - TTLì„ 60ì´ˆë¡œ ì§§ê²Œ ì„¤ì •í•œ ìƒí™©
  - DNSì—ëŠ” íŠ¸ë˜í”½ì˜ ì–‘ì´ ë§ì•„ì ¸ì„œ ë¹„ìš©ì´ ë§ì´ ë“¤ê²Œ ë¨ *(Route 53ì— ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì˜ ì–‘ì— ë”°ë¼ ìš”ê¸ˆ ì±…ì •)*
  - ì˜¤ë˜ëœ ë ˆì½”ë“œì˜ ë³´ê´€ ì‹œê°„ì´ ì§§ì•„ì ¸ ë ˆì½”ë“œ ë³€ê²½ì´ ë¹¨ë¼ì§
- **TTLì€ Alias Recordë¥¼ ì œì™¸í•œ ëª¨ë“  ë ˆì½”ë“œì— ìˆì–´ì„œ í•„ìˆ˜ì **  
<br>

## CNAME vs Alias
- AWS ë¦¬ì†ŒìŠ¤ (Load Balancer, CloudFront)ëŠ” í˜¸ìŠ¤íŠ¸ ì´ë¦„ì´ ë…¸ì¶œë¨    
    (ë‹¤ìŒê³¼ ê°™ì´ í•  ìˆ˜ ìˆìŒ lb l-1234.us-east-2.elbamazonaws.com -> myapp.mydomain.com)

- **CNAME**
  - í˜¸ìŠ¤íŠ¸ ì´ë¦„ì´ ë‹¤ë¥¸ í˜¸ìŠ¤íŠ¸ ì´ë¦„ìœ¼ë¡œ í–¥í•˜ë„ë¡ í•  ìˆ˜ ìˆìŒ (app.mydomain.com -> blabla.anything.com)
  - **â­ï¸ ë£¨íŠ¸ ë„ë©”ì¸ ì´ë¦„ì´ ì•„ë‹Œ ê²½ìš°ì—ë§Œ ê°€ëŠ¥í•´ì„œ mydomain.com ì•ì— ë­”ê°€ë¥¼ ë¶™ì—¬ì•¼ í•¨ (aka. something.mydomain.com)**
- **Alias**
  - Route 53ì— í•œì •ë˜ì§€ë§Œ í˜¸ìŠ¤íŠ¸ ì´ë¦„ì´ íŠ¹ì • AWS ë¦¬ì†ŒìŠ¤ë¡œ í–¥í•˜ë„ë¡ í•  ìˆ˜ ìˆìŒ (app.mydomain.com -> blabla.anything.com)
  - **â­ï¸ ë³„ì¹­ ë ˆì½”ë“œëŠ” ë£¨íŠ¸ ë° ë¹„ë£¨íŠ¸ ë„ë©”ì¸ì— ëª¨ë‘ ì‘ë™ (aka. mydomain.com)**
  - ë¬´ë£Œ
  - ìì²´ì ìœ¼ë¡œ ìƒíƒœ í™•ì¸ ê°€ëŠ¥

### Route 53 - Alias Records (ë³„ì¹­ ë ˆì½”ë“œ)
- ì˜¤ì§ AWSì˜ ë¦¬ì†ŒìŠ¤ì—ë§Œ ë§¤í•‘
  ![alt text](images/alias_record.png)
- An extension to DNS functionality
- Automatically recognizes changes in the resource's IP addresses
- CNAMEê³¼ ë‹¬ë¦¬ Alias RecordëŠ” Zone Apexë¼ëŠ” DNS ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ìƒìœ„ ë…¸ë“œë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆìŒ   
    -> example.comì—ë„ ë³„ì¹­ ë ˆì½”ë“œë¥¼ ì“¸ ìˆ˜ ìˆëŠ” ê±°
- AWS ë¦¬ì†ŒìŠ¤ë¥¼ ìœ„í•œ ë³„ì¹­ ë ˆì½”ë“œì˜ íƒ€ì…ì€ í•­ìƒ A, AAAA (ë¦¬ì†ŒìŠ¤ëŠ” IPv4ë‚˜ IPv6 ì¤‘ í•˜ë‚˜)
- **â­ï¸ ë³„ì¹­ ë ˆì½”ë“œë¥¼ ì‚¬ìš©í•˜ë©´ TTLì„ ì„¤ì •í•  ìˆ˜ ì—†ìŒ. Route 53ì— ì˜í•´ ìë™ìœ¼ë¡œ ì„¤ì •ë¨**

### Route 53 - Alias Records Targets
- Elastic Load Balancers
- CloudFront Distribution 
- API Gateway
- Elastic Beanstalk environments
- S3 Websites (XX S3 Bucket XX)
- VPC Interface Endpoint
- Global Accelerator accelerator
- Route 53 record in the same hosted zone
- **â­ï¸ EC2ì˜ DNS ì´ë¦„ì— ëŒ€í•´ì„œëŠ” ë³„ì¹­ ë ˆì½”ë“œë¥¼ ì„¤ì •í•  ìˆ˜ ì—†ìŒ. EC2 DNS ì´ë¦„ì€ ë³„ì¹­ ë ˆì½”ë“œì˜ ëŒ€ìƒì´ ë  ìˆ˜ ì—†ìŒ**
<br>   
<br>


## Route 53 Policies
> ## DNS(Route 53) ë¼ìš°íŒ… vs Load Balancer ë¼ìš°íŒ…
> ### 1. DNS(Route 53) ë¼ìš°íŒ… - "ì–´ë””ë¡œ ê°ˆì§€ ì•Œë ¤ì£¼ëŠ” ì—­í• ":
>   - í´ë¼ì´ì–¸íŠ¸ê°€ ì–´ë–¤ ì„œë²„(IP)ë¡œ ì ‘ì†í•´ì•¼ í•˜ëŠ”ì§€ë¥¼ ì•Œë ¤ì£¼ëŠ” ì—­í•  (IP ì£¼ì†Œë¥¼ ë°˜í™˜)
>   - **íŠ¸ë˜í”½ì„ ì§ì ‘ ì²˜ë¦¬í•˜ê±°ë‚˜ ì „ë‹¬í•˜ì§€ ì•ŠìŒ**
>   - <u>íŠ¸ë˜í”½ì€ DNSë¥¼ í†µê³¼í•˜ì§€ ì•ŠìŒ</u>
>   - <u>DNSëŠ” DNS ì¿¼ë¦¬ì—ë§Œ ì‘ë‹µ</u>
>   - ğŸ“ DNSê°€ íŠ¸ë˜í”½ì„ 'ì „ë‹¬'í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ **í´ë¼ì´ì–¸íŠ¸ê°€ ì–´ë””ë¡œ ê°€ì•¼í• ì§€ ì•Œë ¤ì£¼ëŠ” ê²ƒ**
> > example.com      A     123.345.6.7 (DNSê°€ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ëª©ì ì§€ IPë¥¼ ë°˜í™˜)
>   
> ### 2. ë¡œë“œ ë°¸ëŸ°ì„œ ë¼ìš°íŒ… - "íŠ¸ë˜í”½ì„ ì‹¤ì œë¡œ ë¶„ì‚°í•˜ëŠ” ì—­í• ":
>   - ë°›ì€ íŠ¸ë˜í”½ì„ ì—¬ëŸ¬ ì„œë²„ë¡œ ë¶„ì‚°í•˜ëŠ” ì—­í• 
>   - **ì‹¤ì œë¡œ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì„ ì „ë‹¬í•˜ê³  ê´€ë¦¬í•¨**
>   - ğŸ“ **ë¡œë“œë°¸ëŸ°ì„œëŠ” ì§ì ‘ ìš”ì²­ì„ ë°›ì•„ì„œ ì‹¤ì œ ì„œë²„ë¡œ ì „ë‹¬í•˜ê³  ì‘ë‹µë„ ë‹¤ì‹œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ë‹¬**
> > í´ë¼ì´ì–¸íŠ¸ -> ë¡œë“œ ë°¸ëŸ°ì„œ (my-load-balancer.amazonaws.com)
> > ë¡œë“œ ë°¸ëŸ°ì„œ -> ì—¬ëŸ¬ ì„œë²„ ì¤‘ í•˜ë‚˜ (EC2-1, EC2-2 ...)
> > ì„œë²„ê°€ ì‘ë‹µ -> ë¡œë“œë°¸ëŸ°ì„œ -> í´ë¼ì´ì–¸íŠ¸

- Route 53 Supports the following Routing Policies 
  - Simple (ë‹¨ìˆœ)
  - Weighted (ê°€ì¤‘ì¹˜ ê¸°ë°˜)
  - Failover (ì¥ì•  ì¡°ì¹˜)
  - Latency based (ì§€ì—° ê¸°ë°˜)
  - Geolocation (ì§€ë¦¬ì )
  - Muli-Value Answer (ë‹¤ì¤‘ ê°’ ì‘ë‹µ)
  - Geoproximity (using Route 53 Traffic Flow feature; ì§€ë¦¬ ê·¼ì ‘)

### Routing Policies - Simple
- ê°€ì¥ ê¸°ë³¸ì ì¸ ë°©ì‹
- íŠ¸ë˜í”½ì„ ë‹¨ì¼ ë¦¬ì†ŒìŠ¤ë¡œ ë³´ë‚´ëŠ” ë°©ì‹
- ë™ì¼í•œ ë ˆì½”ë“œì— ì—¬ëŸ¬ ê°œì˜ ê°’ì„ ì§€ì •í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥   
    **ì´ë ‡ê²Œ DNSì— ì˜í•´ ë‹¤ì¤‘ ê°’ì„ ì „ë‹¬ ë°›ìœ¼ë©´ <u>í´ë¼ì´ì–¸íŠ¸ ìª½ì—ì„œ</u> ê·¸ ì¤‘ í•˜ë‚˜ë¥¼ ë¬´ì‘ìœ„ë¡œ ê³ ë¥´ê²Œ ë¨**
- ë‹¨ìˆœ ë¼ìš°íŒ… ì •ì±…ì— Alias recordë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ í•˜ë‚˜ì˜ AWS ë¦¬ì†ŒìŠ¤ë§Œì„ ëŒ€ìƒìœ¼ë¡œ ì§€ì •í•  ìˆ˜ ìˆìŒ
- **Health Checks XXX**


### Routing Policies - Weighted 
- ê°€ì¤‘ì¹˜ë¥¼ í™œìš©í•´ ìš”ì²­ì˜ ì¼ë¶€ ë¹„ìœ¨ì„ íŠ¹ì • ë¦¬ì†ŒìŠ¤ë¡œ ë³´ë‚´ëŠ” ì‹ì˜ ì œì–´ê°€ ê°€ëŠ¥í•¨
![alt text](images/policies_weighted.png) 
- ê°€ì¤‘ì¹˜ì˜ í•©ì´ ê¼­ 100ì´ ë  í•„ìš”ëŠ” ì—†ìŒ
- ê° ë ˆì½”ë“œì— ìƒëŒ€ì ìœ¼ë¡œ ê°€ì¤‘ì¹˜ë¥¼ í• ë‹¹í•˜ê²Œ ë˜ëŠ” ê²ƒ   
    *traffic* (%) = *Weighted for a specific record* / *Sum of all the weights for all records*
- **DNS ë ˆì½”ë“œë“¤ì„ ë™ì¼í•œ ì´ë¦„ê³¼ ìœ í˜•ì„ ê°€ì ¸ì•¼ í•¨**
- Health Check (ìƒíƒœ ì²´í¬) ê°€ëŠ¥
- ê°€ì¤‘ì¹˜ ê¸°ë°˜ ì •ì±…ì´ ì‚¬ìš©ë˜ëŠ” ê²½ìš°
  - ì„œë¡œ ë‹¤ë¥¸ ì§€ì—­ë“¤ì— ê±¸ì³ ë¡œë“œ ë°¸ëŸ°ì‹±ì„ í•˜ëŠ” ê²½ìš°
  - ì ì€ ì–‘ì˜ íŠ¸ë˜í”½ì„ ë³´ë‚´ ìƒˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²½ìš°
- **ê°€ì¤‘ì¹˜ 0ì˜ ê°’ì„ ë³´ë‚´ê²Œ ë˜ë©´ íŠ¹ì • ë¦¬ì†ŒìŠ¤ì— íŠ¸ë˜í”½ ë³´ë‚´ê¸°ë¥¼ ì¤‘ë‹¨í•´ ê°€ì¤‘ì¹˜ë¥¼ ë°”ê¿€ ìˆ˜ ìˆìŒ**   
    > *Assign a weight of 0 to a record to stop sending traffic to a resource*
- **ë§Œì•½ ëª¨ë“  ë¦¬ì†ŒìŠ¤ ë ˆì½”ë“œ ê°€ì¤‘ì¹˜ì˜ ê°’ì´ 0ì¸ ê²½ìš°ì—ëŠ” ëª¨ë“  ë ˆì½”ë“œê°€ ë‹¤ì‹œ ë™ì¼í•œ ê°€ì¤‘ì¹˜ë¥¼ ê°–ê²Œ ë¨**   
    > *If all records have weight of 0, then all records will be returned equally*   


### Routing Poilices - Latency-based
- ì§€ì—° ì‹œê°„ì´ ê°€ì¥ ì§§ì€, ì¦‰ ê°€ì¥ ê°€ê¹Œìš´ ë¦¬ì†ŒìŠ¤ë¡œ ë¦¬ë‹¤ì´ë ‰íŒ…ì„ í•˜ëŠ” ì •ì±…
- ì§€ì—° ì‹œê°„ì— ë¯¼ê°í•œ ì›¹ì‚¬ì´íŠ¸ë‚˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìˆëŠ” ê²½ìš°ì— ì•„ì£¼ ìœ ìš©í•œ ì •ì±…
- ì§€ì—° ì‹œê°„ì€ ìœ ì €ê°€ ë ˆì½”ë“œë¡œ ê°€ì¥ ê°€ê¹Œìš´ ì‹ë³„ëœ AWS ë¦¬ì „ì— ì—°ê²°í•˜ê¸°ê¹Œì§€ì˜ ê±¸ë¦¬ëŠ” ì‹œê°„ì„ ê¸°ë°˜ìœ¼ë¡œ ì¸¡ì •ë¨   
    > Latency is based on traffic between users and AWS Regions
- Health Check ê°€ëŠ¥   


> ## Route 53 - Health Checks
> - ìƒíƒœ í™•ì¸ì€ ì£¼ë¡œ ê³µìš© ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ë°©ë²• 
> - DNSì˜ ì¥ì•  ì¡°ì¹˜ë¥¼ ìë™í™”í•˜ê¸° ìœ„í•œ ë°©ë²•:   
>   1. ê³µìš© ì—”ë“œ í¬ì¸íŠ¸ë¥¼ ëª¨ë‹ˆí„°ë§   
>       (applicaiton, server, other AWS resources)
>   2. ë‹¤ë¥¸ ìƒíƒœ í™•ì¸ì„ ëª¨ë‹ˆí„°ë§   
>       (Calculated Health Checks)
>   3. CloudWatch ê²½ë³´ì˜ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§   
>       (full control, ê°œì¸ ë¦¬ì†ŒìŠ¤ì— ìœ ìš©)
> - Health Checks are integrated with CloudWatch metrics
> <br>
> 
> ### Health check - Monitor an Endpoint
> - **ì „ ì„¸ê³„ì—ì„œ ì˜¨ 15ê°œì˜ ìƒíƒœ í™•ì¸ì´ ì—”ë“œ í¬ì¸íŠ¸ì˜ ìƒíƒœë¥¼ í™•ì¸í•˜ê³  ì„ê³„ê°’ì„ ì •ìƒ(healthy) í˜¹ì€ ë¹„ì •ìƒ(unhealthy)ìœ¼ë¡œ ì„¤ì •**   
> ![alt text](images/health_check_endpoint.png)
>   - Healty/Unhealthy Threshold - 3 (default)
>   - Interval - 30 sec (can set to 10 sec - higher cost)
>   - HTTP, HTTPS, TCP ë“± ë§ì€ í”„ë¡œí† ì½œì„ ì§€ì •í•¨
>   - 18% ì´ìƒì˜ ìƒíƒœ í™•ì¸ì´ ì—”ë“œ í¬ì¸íŠ¸ë¥¼ ì •ìƒì´ë¼ê³  íŒë‹¨í•˜ë©´ Route 53ë„ ì´ë¥¼ ì •ìƒì´ë¼ê³  ê°„ì£¼
>   - ìƒíƒœ í™•ì¸ì— ì‚¬ìš©ë  ìœ„ì¹˜ë„ ì„ íƒí•  ìˆ˜ ìˆìŒ
>   - ìƒíƒœ í™•ì¸ì€ ë¡œë“œ ë°¸ëŸ°ì„œë¡œë¶€í„° 2xxë‚˜ 3xxì˜ ì½”ë“œë¥¼ ë°›ì•„ì•¼ë§Œ í†µê³¼ë¨
>   - í…ìŠ¤íŠ¸ ê¸°ë°˜ ì‘ë‹µì¼ ê²½ìš° ìƒíƒœ í™•ì¸ì€ ì‘ë‹µì˜ ì²˜ìŒ 5,120 ë°”ì´íŠ¸ë¥¼ í™•ì¸    
>       (ì‘ë‹µ ìì²´ì— í•´ë‹¹ í…ìŠ¤íŠ¸ê°€ ìˆëŠ”ì§€ ë³´ê¸° ìœ„í•´ì„œ)
>   - ğŸ“ (ë„¤íŠ¸ì›Œí¬ ì¸¡ë©´) ìƒíƒœ í™•ì¸ì˜ ì‘ë™ì´ ê°€ëŠ¥í•˜ë ¤ë©´ health checkê°€ ìš°ë¦¬ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°¸ëŸ°ì„œë‚˜ ì—”ë“œ í¬ì¸íŠ¸ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•´ì•¼ í•¨   
>       ë”°ë¼ì„œ, **Route 53ì˜ ìƒíƒœ í™•ì¸ IP ì£¼ì†Œ ë²”ìœ„ì—ì„œ ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  ìš”ì²­ì„ í—ˆìš©í•´ì•¼ í•¨**
>
> ### Health check - Calculated Health Checks (Status of other health checks)
> - ì—¬ëŸ¬ ê°œì˜ ìƒíƒœ í™•ì¸ ê²°ê³¼ë¥¼ í•˜ë‚˜ë¡œ í•©ì³ì£¼ëŠ” ê¸°ëŠ¥   
> ![alt text](images/health_check_calculated.png)
> - ìœ„ì˜ í•˜ìœ„ ìƒíƒœ í™•ì¸ì„ ê¸°ë°˜ìœ¼ë¡œ ìƒìœ„ ìƒíƒœ í™•ì¸ì„ ì •ì˜í•  ìˆ˜ ìˆìŒ
> - ì´ ìƒíƒœ í™•ì¸ë“¤ì„ ëª¨ë‘ í•©ì¹˜ê¸° ìœ„í•œ ì¡°ê±´ì€ **OR, AND, NOT**
> - í•˜ìœ„ ìƒíƒœ í™•ì¸ì„ 256ê°œê¹Œì§€ ëª¨ë‹ˆí„°ë§í•  ìˆ˜ ìˆìŒ
> - ìƒìœ„ ìƒíƒœ í™•ì¸ì´ í†µê³¼í•˜ê¸° ìœ„í•´ ëª‡ ê°œì˜ ìƒíƒœ í™•ì¸ì„ í†µê³¼í•´ì•¼ í•˜ëŠ”ì§€ë„ ì§€ì •í•  ìˆ˜ ìˆìŒ
> - use case:
>   - ìƒíƒœ í™•ì¸ì´ ì‹¤íŒ¨í•˜ëŠ” ì¼ ì—†ì´ ìƒìœ„ ìƒíƒœ í™•ì¸ì´ ì›¹ì‚¬ì´íŠ¸ë¥¼ ê´€ë¦¬ ìœ ì§€í•˜ë„ë¡ í•˜ëŠ” ê²½ìš°
>
>
> ### Health Checks - Private Hosted Zones (ê°œì¸ ë¦¬ì†ŒìŠ¤ ìƒíƒœ í™•ì¸)
> - Route 53 health checkers are outside the VPC
> - They can't access **private** endpoints (private VPC or on-premises resource)
> > **on-premises ë¦¬ì†ŒìŠ¤ë€?**
> > - í´ë¼ìš°ë“œê°€ ì•„ë‹Œ ìì²´ì ìœ¼ë¡œ êµ¬ì¶•í•œ ë°ì´í„°ì„¼í„° ë˜ëŠ” ì„œë²„
> > - AWSì™€ ê°™ì€ í¼ë¸”ë¦­ í´ë¼ìš°ë“œê°€ ì•„ë‹ˆë¼, íšŒì‚¬ ë‚´ë¶€ì—ì„œ ì§ì ‘ ê´€ë¦¬í•˜ëŠ” IT ì¸í”„ë¼
> - You can create a **CloudWatch Metric** and associate a **CloudWatch Alarm**, then create a Health Check that checks the alarm itself
> ![alt text](images/health_check_cloudwatch.png)
> - ìœ„ì™€ ê°™ì´ ì¸ ì„œë¸Œë„· ì•ˆì— ìˆëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ëª¨ë‹ˆí„°


### Routing Policies - Failover (Active-Passive)
![alt text](images/health_check_failover.png)   
1. ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
  - 1ë²ˆ ì¸ìŠ¤í„´ìŠ¤: EC2 Instance (Primary)
  - 2ë²ˆ ì¸ìŠ¤í„´ìŠ¤: EC2 Instance (Secondary - Diaster Recovery)
2. Health Checkì™€ Primary ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì—°ê²° (í•„ìˆ˜)
3. ìƒíƒœ í™•ì¸ì´ ë¹„ì •ìƒì´ë©´ ìë™ìœ¼ë¡œ Route 53ì€ 2ë²ˆì§¸ì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ë¡œ ì¥ì•  ì¡°ì¹˜í•˜ë©° ê²°ê³¼ë¥¼ ë³´ë‚´ê¸° ì‹œì‘
- ê¸°ë³¸ ì¸ìŠ¤í„´ìŠ¤ê°€ ì •ìƒì´ë©´ Route 53ë„ ê¸°ë³¸ ë ˆì½”ë“œë¡œ ì‘ë‹µ
- but, unhealtyë©´ ì¥ì•  ì¡°ì¹˜ì— ë„ì›€ë˜ëŠ” ë‘ë²ˆì§¸ ë ˆì½”ë“œì˜ ì‘ë‹µì„ ìë™ìœ¼ë¡œ ì–»ê²Œ ë¨


### Routing Policies - Geolocation
- Latency-based ì •ì±…ê³¼ëŠ” ë§¤ìš° ë‹¤ë¥´ê²Œ **ì‚¬ìš©ìì˜ ì‹¤ì œ ìœ„ì¹˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•¨**
- e.g. ì‚¬ìš©ìê°€ íŠ¹ì • ëŒ€ë¥™ì´ë‚˜ êµ­ê°€, í˜¹ì€ ë¯¸êµ­ì˜ ê²½ìš° ì–´ë–¤ ì£¼ì— ìˆëŠ”ì§€ ì§€ì •í•˜ëŠ” ê²ƒì´ë©° ê°€ì¥ ì •í™•í•œ ìœ„ì¹˜ê°€ ì„ íƒë˜ì–´ ê·¸ IPë¡œ ë¼ìš°íŒ…ë˜ëŠ” ê²ƒ
- ì¼ì¹˜í•˜ëŠ” ìœ„ì¹˜ê°€ ì—†ëŠ” ê²½ìš°ëŠ” **"Default" ë ˆì½”ë“œ**ë¥¼ ìƒì„±í•´ì•¼ í•¨
- use case:   
  - website localization
  - restrict content distribution
  - load balancing
- ìƒíƒœ í™•ì¸ê³¼ ì—°ê²° ê°€ëŠ¥   

### Routing Policies - Geoproximity (ì§€ë¦¬ ê·¼ì ‘ ë¼ìš°íŒ…)
![alt text](images/policies_geoproximity.png)
- ì‚¬ìš©ìì™€ ë¦¬ì†ŒìŠ¤ì˜ ì§€ë¦¬ì  ìœ„ì¹˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ íŠ¸ë˜í”½ì„ ë¦¬ì†ŒìŠ¤ë¡œ ë¼ìš°íŒ…í•˜ë„ë¡ í•¨
- bias (í¸í–¥ê°’)ì„ ì‚¬ìš©í•´ íŠ¹ì • ìœ„ì¹˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ë” ë§ì€ íŠ¸ë˜í”½ì„ ì´ë™í•˜ëŠ” ê²ƒ   
  > Ability **to shift more traffic to resources based** on the defined **bias**
- ì§€ë¦¬ì  ìœ„ì¹˜ë¥¼ ë³€ê²½í•˜ë ¤ë©´ **í¸í–¥ê°’ì„ ì§€ì •**í•´ì•¼ í•¨
  - íŠ¹ì • ë¦¬ì†ŒìŠ¤ì— ë” ë§ì€ íŠ¸ë˜í”½ì„ ë³´ë‚´ë ¤ë©´, í¸í–¥ê°’ì„ ì¦ê°€ì‹œì¼œì„œ í™•ì¥í•˜ë©´ ë¨ (1 to 99)
  - íŠ¹ì • ë¦¬ì†ŒìŠ¤ì— íŠ¸ë˜í”½ì„ ì¤„ì´ë ¤ë©´, í¸í–¥ê°’ì„ ìŒìˆ˜ë¡œ ì¶•ì†Œì‹œí‚¤ë©´ ë¨ (-1 to -99)
- Resouces can be:
  - AWS resouces (specify AWS region)
  - Non-AWS resources (specify Latitude and Longtitude)
- **í¸í–¥ í™œìš©ì„ ìœ„í•´ ê³ ê¸‰ Route 53 íŠ¸ë˜í”½ í”Œë¡œìš°ë¥¼ ì‚¬ìš©**
- íŠ¹ì • ë¦¬ì „ì— ë” ë§ì€ íŠ¸ë˜í”½ì„ ë³´ë‚´ì•¼ í•œë‹¤ê³  í•˜ë©´, ì§€ë¦¬ ê·¼ì ‘ ë¼ìš°íŒ…ì„ ì‚¬ìš©í•´ íŠ¹ì • ë¦¬ì „ì˜ í¸í–¥ì„ ì¦ê°€ì‹œí‚¤ë©´ ë” ë§ì€ ì‚¬ìš©ìê°€ ìƒê¸°ê³  íŠ¹ì • ë¦¬ì „ì— ë” ë§ì€ íŠ¸ë˜í”½ì´ ë°œìƒí•˜ê²Œ ë¨ 
- â­ï¸ ì§€ë¦¬ ê·¼ì ‘ ë¼ìš°íŒ…ì€ í¸í–¥ì„ ì¦ê°€ì‹œì¼œ í•œ ë¦¬ì „ì—ì„œ ë‹¤ë¥¸ ë¦¬ì „ìœ¼ë¡œ íŠ¸ë˜í”½ì„ ë³´ë‚¼ ë•Œ ìœ ìš©


### Routing Policies - IP based Routing
![alt text](images/policies_ip.png)
- í´ë¼ì´ì–¸íŠ¸ IP ì£¼ì†Œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¼ìš°íŒ…ì„ ì •ì˜
1. Route 53ì—ì„œ CIDR ëª©ë¡ì„ ì •ì˜ (-> í´ë¼ì´ì–¸íŠ¸ì˜ IP ë²”ìœ„)
2. CIDRì— ë”°ë¼ íŠ¸ë˜í”½ì„ ì–´ëŠ endpoints/locationsë¡œ ë³´ë‚´ì•¼ í•˜ëŠ”ì§€ ì •í•¨

- ip ê¸°ë°˜ ë¼ìš°íŒ…ì„ ì‚¬ìš©í•˜ë©´ ipë¥¼ ë¯¸ë¦¬ ì•Œê³  ìˆìœ¼ë¯€ë¡œ ì„±ëŠ¥ì„ ìµœì í™”, ë„¤íŠ¸ì›Œí¬ ë¹„ìš©ì„ ì ˆê°í•  ìˆ˜ ìˆìŒ
- e.g. íŠ¹ì • ì¸í„°ë„· ì œê³µì—…ì²´ê°€ íŠ¹ì • IP ì£¼ì†Œ ì…‹ì„ ì‚¬ìš©í•˜ëŠ” ê±¸ ì•ˆë‹¤ë©´ íŠ¹ì • ì—”ë“œí¬ì¸íŠ¸ë¡œ ë¼ìš°íŒ…í•  ìˆ˜ ìˆìŒ


### Routing Policies - Mulit-Value
- íŠ¸ë˜í”½ì„ ë‹¤ì¤‘ ë¦¬ì†ŒìŠ¤ë¡œ ë¼ìš°íŒ…í•  ë•Œ ì‚¬ìš©
- Route 53ì€ ë‹¤ì¤‘ ê°’ê³¼ ë¦¬ì†ŒìŠ¤ë¥¼ ë°˜í™˜
- Health Checkì™€ ì—°ê²°í•˜ë©´ ë‹¤ì¤‘ ê°’ ì •ì±…ì—ì„œ ë°˜í™˜ë˜ëŠ” ìœ ì¼í•œ ë¦¬ì†ŒìŠ¤ëŠ” 'healthy' ìƒíƒœì¸ ë¦¬ì†ŒìŠ¤ë“¤
- ê°ê°ì˜ ë‹¤ì¤‘ ê°’ ì¿¼ë¦¬ì— ìµœëŒ€ 8ê°œì˜ ì •ìƒ ë ˆì½”ë“œê°€ ë°˜í™˜ë¨
- ELBì™€ ìœ ì‚¬í•´ë³´ì´ì§€ë§Œ ELBë¥¼ ëŒ€ì²´í•  ìˆ˜ ì—†ìŒ   
    -> ì´ê±´ í´ë¼ì´ì–¸íŠ¸ ì¸¡ë©´ì˜ ë¡œë“œ ë°¸ëŸ°ì‹±ì¸ ê²ƒ
- í´ë¼ì´ì–¸íŠ¸ëŠ” ë°˜í™˜ë˜ëŠ” 1ê°œì—ì„œ ìµœëŒ€ 8ê°œì˜ ë ˆì½”ë“œê°€ ì •ìƒì¼ ê²ƒì„ ì•Œê³  ìˆìŒ â¡ï¸ í´ë¼ì´ì–¸íŠ¸ëŠ” ì•ˆì „í•œ ì¿¼ë¦¬ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŒ
- âš ï¸ ë‹¤ì¤‘ ê°’ì´ ìˆëŠ” Simple ë¼ìš°íŒ…ì˜ ê²½ìš°ì—ëŠ” health checkë¥¼ í—ˆìš©í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë°˜í™˜ë˜ëŠ” ë ˆì½”ë“œê°€ ë¹„ì •ìƒì¼ ìˆ˜ ìˆìŒ â¡ï¸ ì´ê²Œ Multi-Value ì •ì±…ì´ ë” ê°•ë ¥í•œ ì´ìœ 


## Domain Registar vs DNS Service
- Domain Registrarë¥¼ í†µí•´ ë„ë©”ì¸ ë„¤ì„ì„ êµ¬ë§¤í•  ìˆ˜ ìˆìŒ
- ë ˆì§€ìŠ¤íŠ¸ë¼ë¥¼ í†µí•´ ë„ë©”ì¸ì„ ë“±ë¡í•˜ë©´ DNS ë ˆì½”ë“œ ê´€ë¦¬ë¥¼ ìœ„í•œ DNS ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•¨
- GoDaddyë¡œ ë„ë©”ì¸ì„ ë“±ë¡í•˜ê³  DNS ë ˆì½”ë“œëŠ” Amazonì˜ Route 53ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥

### GoDaddy as Registrar & Route 53 as DNS Service
1. GoDaddyì—ì„œ ë„ë©”ì¸ì„ ë“±ë¡í•˜ë©´ Nameservers ì˜µì…˜ì´ ìƒê¸°ëŠ”ë°, ì‚¬ìš©ì ì •ì˜ ì´ë¦„ ì„œë²„ë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŒ
2. ë¨¼ì €, Amazon Route 53ì—ì„œ ì›í•˜ëŠ” ë„ë©”ì¸ì˜ ê³µìš© í˜¸ìŠ¤íŒ… ì˜ì—­(Public Hosted Zone)ì„ ìƒì„±í•˜ê³  Hosted zone details > Name serversë¥¼ ì°¾ìŒ
3. í•´ë‹¹ ë‚´ìš©ìœ¼ë¡œ GoDaddy ì›¹ì‚¬ì´íŠ¸ì˜ Nameserversë¥¼ ë³€ê²½í•´ì•¼ í•¨   
   > ì´ì œ GoDaddyì—ì„œ ì‚¬ìš©í•  ì´ë¦„ ì„œë²„ì— ê´€í•œ ì¿¼ë¦¬ì— ì‘ë‹µí•˜ë©´ ì´ë¦„ ì„œë²„ê°€ Amazonì˜ Route 53 ì´ë¦„ ì„œë²„ë¥¼ ê°€ë¦¬í‚¤ê³  ê·¸ë ‡ê²Œ Amazon Route 53ì„ ì‚¬ìš©í•´ì„œ í•´ë‹¹ ì½˜ì†”ì—ì„œ ì§ì ‘ ì „ì²´ DNS ë ˆì½”ë“œë¥¼ ê´€ë¦¬í•¨

### 3rd Party Registrar with Amazon Route 53
- If you buy your domain on a 3rd party registrar, you can still use Route 53 as the DNS service provider
1. Create a Hosted Zone in Route 53
2. Update NS Records on 3rd party website to use Route 53 **Name Servers**

- Domain Registrar != DNS Service
- But every Domain Registrar usually comes with some DNS features