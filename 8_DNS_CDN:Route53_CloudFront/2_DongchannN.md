# Amazon Route 53

Route 53은 AWS의 확장성 높은 DNS(Domain Name System) 서비스로, 도메인 등록부터 트래픽 관리까지 다양한 기능을 제공. 특히 다음 4가지 영역에 초점을 맞추었음

## 주요 기능 영역

### 1. 도메인 등록

- Route 53을 통해 새로운 도메인 이름을 직접 구매하고 등록할 수 있음
- 이미 다른 곳에서 등록한 기존 도메인을 AWS로 이전하는 작업도 간단하게 할 수 있음
- 도메인 등록과 동시에 DNS 관리가 연동되기 때문에, 도메인 소유와 네임서버 설정이 한 곳에서 간편하게 통합됨

### 2. DNS 관리

도메인을 등록했더라도 **도메인과 리소스를 연결하지 않으면 원하는 작업을 할 수 없음**.

> **호스팅 영역이란?**  
> 호스팅 영역은 도메인에 대한 DNS 레코드(A, CNAME, MX 등)의 컨테이너로, 도메인과 서브도메인의 트래픽을 어디로 라우팅할지 정의하는 레코드들의 집합.

기존 방식에서는 미리 설정된 존 파일(DNS 설정 파일)을 임포트해서 수정했지만, Route 53에서는 호스팅 영역을 쉽게 생성한 뒤 AWS 콘솔이나 CLI에서 직관적으로 설정할 수 있음

Route 53에서 제공하는 두 가지 호스팅 영역 유형
1. **퍼블릭 호스팅 영역**: 인터넷을 통해 공개적으로 접근 가능한 도메인을 위한 설정
2. **프라이빗 호스팅 영역**:
    - 특정 VPC 내에서만 확인할 수 있는 내부용 DNS 설정
    - 회사 내부 자원에 대한 이름 지정이나 접근 제어가 필요할 때 유용
    - 외부에서는 접근할 수 없고, 지정한 VPC 내에서만 해당 도메인 이름이 해석됨

Route 53 DNS 관리의 장점
- A, CNAME, MX 등 다양한 DNS 레코드 타입 지원
- 글로벌 네트워크를 통한 빠르고 안정적인 DNS 쿼리 처리
- AWS 리소스와의 원활한 통합
- DNSSEC, IAM 기반 접근 제어 등 보안 기능 제공

### 3. 가용성 모니터링

- **헬스 체크**: Route 53은 웹 서버나 애플리케이션의 상태를 주기적으로 점검하는 헬스 체크 기능 제공
- **자동 트래픽 재라우팅**: 헬스 체크 결과에 따라 장애가 발생한 엔드포인트로의 트래픽을 차단하고, 정상 엔드포인트로 자동 우회시킴
- **CloudWatch 연동**: Amazon CloudWatch와 연계하여 실시간 모니터링 및 알람 설정 가능

### 4. 트래픽 관리 (라우팅 정책)

Route 53은 다양한 라우팅 정책을 제공하여 트래픽 흐름을 세밀하게 제어할 수 있음

1. **심플 라우팅(Simple Routing)**:
    
    - 가장 기본적인 정책으로 단순히 하나의 리소스로 트래픽을 전달
    - 동일한 레코드 이름에 여러 값을 제공하면 DNS는 무작위로 하나를 반환
2. **가중치 라우팅(Weighted Routing)**:
    - 여러 엔드포인트에 트래픽 비율을 지정하여 분산
    - 예: 3개의 서버에 각각 20%, 30%, 50%로 트래픽 분산 가능
    - 새 버전 테스트(A/B 테스트), 블루/그린 배포 등에 유용
3. **지연 라우팅(Latency Routing)**:
    - 사용자와 AWS 리전 간의 지연 시간을 기준으로 최적의 리전으로 트래픽 라우팅
    - 전 세계 사용자를 대상으로 하는 애플리케이션의 응답 속도 향상에 효과적
4. **실패 대응 라우팅(Failover Routing)**:
    
    - 헬스 체크 결과에 따라 주 엔드포인트에 장애 발생 시 대체 엔드포인트로 자동 전환
    - 고가용성이 필요한 애플리케이션에 적합
5. **지리적 라우팅(Geolocation Routing)**:
    - 사용자의 지리적 위치에 따라 서로 다른 엔드포인트로 라우팅
    - 국가별 맞춤 콘텐츠 제공, 콘텐츠 제한, 로드 밸런싱 등에 활용
6. **다변량 라우팅(Multivalue Answer Routing)**:
    - 여러 값을 반환하여 클라이언트가 선택할 수 있게 함
    - 심플 라우팅과 유사하지만 헬스 체크와 연계하여 정상 엔드포인트만 반환하는 기능 추가

## Traffic Flow

Traffic Flow는 복잡한 라우팅 구성을 시각적으로 쉽게 관리할 수 있게 해주는 기능.

- **시각적 편집기**: 드래그 앤 드롭 방식의 시각적 인터페이스로 복잡한 라우팅 설계 가능
- **정책 조합**: 여러 라우팅 정책(가중치, 지연, 지리적 등)을 조합하여 정교한 트래픽 흐름 구성
- **버전 관리**: 라우팅 설정의 변경사항을 버전으로 관리하여 롤백 용이
- **전역 레코드**: 전 세계적으로 분산된 애플리케이션의 트래픽 흐름을 한 곳에서 관리

## Route 53 Resolver

Route 53 Resolver는 AWS 리소스와 온프레미스 환경 사이의 DNS 쿼리를 효율적으로 처리하는 서비스.

- **하이브리드 DNS 지원**: VPC와 온프레미스 네트워크 간 DNS 쿼리 전달을 통합적으로 관리
- **조건부 포워딩**: 특정 도메인에 대한 쿼리만 선택적으로 전달 가능
- **인바운드/아웃바운드 엔드포인트**:
    - **인바운드**: 온프레미스에서 AWS로의 DNS 쿼리 허용
    - **아웃바운드**: AWS에서 온프레미스로의 DNS 쿼리 전달
- **DNS 방화벽(Firewall)**: 악성 도메인 접속 차단, 신뢰할 수 있는 도메인만 허용하는 보안 정책 적용 가능
- **중앙 집중식 관리**: 여러 VPC에 걸친 DNS 쿼리를 중앙에서 효율적으로 관리

## 실무 활용

1. **환경별 전략**:
    - 소규모 프로젝트: 심플 라우팅으로 시작
    - 글로벌 서비스: 지연 라우팅 또는 지리적 라우팅 고려
    - 고가용성 요구: 실패 대응 라우팅 구성
2. **비용 최적화**:
    - 호스팅 영역, 쿼리 수, 헬스 체크에 따라 비용이 발생하므로 사용량 모니터링
    - 불필요한 레코드나 호스팅 영역 정리
3. **보안 강화**:
    - IAM 정책으로 Route 53 리소스에 대한 접근 제한
    - DNSSEC 활성화로 DNS 스푸핑 공격 방지

# Amazon CloudFront

CloudFront는 AWS의 글로벌 콘텐츠 전송 네트워크(CDN)로, 정적 및 동적 콘텐츠를 전 세계 사용자에게 빠르고 안전하게 제공하는 서비스.

## 주요 특징

### 글로벌 엣지 네트워크

- **600개 이상의 엣지 로케이션**: 전 세계에 분산된 엣지 로케이션을 통해 사용자와 가까운 곳에서 콘텐츠 제공
- **지역 캐시**: 대규모 지역 캐시를 통해 원본 서버의 부하 감소
- **자동 네트워크 매핑**: 사용자 요청을 자동으로 가장 가까운 엣지 로케이션으로 라우팅

### 지연시간 감소

- **지능형 라우팅**: 네트워크 상태와 사용자 위치를 고려한 최적의 경로 선택
- **오리진 장애 감지**: 원본 서버 장애 시 자동으로 대체 경로 활용
- **콘텐츠 캐싱**: 자주 액세스되는 콘텐츠를 엣지에 캐싱하여 반복 요청의 응답 시간 단축

### 보안 강화

- **HTTPS 지원**: 모든 트래픽에 대한 암호화 통신 지원
- **접근 제어**: 서명된 URL, 서명된 쿠키를 통한 콘텐츠 접근 제한
- **AWS Shield Standard**: 기본 제공되는 DDoS 방어 기능
- **AWS WAF 통합**: 웹 애플리케이션 방화벽과 통합하여 악성 트래픽 차단
- **필드 레벨 암호화**: 특정 데이터 필드의 엔드-투-엔드 암호화 지원

### 실시간 모니터링 및 로깅

- **CloudWatch 통합**: 실시간 메트릭과 알람 설정 기능
- **표준 로깅**: 사용자 요청, 캐시 히트/미스, 지연 시간 등 상세 정보 기록
- **실시간 로깅**: 요청 데이터를 실시간으로 처리할 수 있는 로깅 옵션
- **빠른 무효화**: 캐시된 콘텐츠를 2분 내에 무효화하여 최신 콘텐츠 제공 가능

### 엣지 컴퓨팅

- **CloudFront Functions**: 경량 JavaScript 함수를 엣지에서 실행 (요청/응답 조작)
- **Lambda@Edge**: 좀 더 복잡한 로직을 엣지에서 실행 가능한 서버리스 컴퓨팅
- **낮은 지연 시간**: 사용자에게 가까운 위치에서 코드 실행으로 응답 시간 단축
- **맞춤형 콘텐츠**: 사용자 디바이스, 위치, 요청 특성에 따른 맞춤형 콘텐츠 생성

### 다양한 콘텐츠 지원

- **정적 콘텐츠**: HTML, CSS, JavaScript, 이미지 등
- **동적 API**: REST API 요청/응답 처리
- **스트리밍 미디어**: VOD(Video on Demand) 및 라이브 스트리밍 지원
- **파일 다운로드**: 대용량 파일 다운로드 최적화
- **소프트웨어 배포**: 애플리케이션 업데이트 및 패치 배포

### 유연한 캐시 및 동작 설정

- **캐시 키 관리**: 요청 헤더, 쿠키, 쿼리 문자열 등을 기반으로 맞춤 캐시 키 설정
- **압축 지원**: 자동 Gzip, Brotli 압축으로 전송 크기 최소화
- **오리진 헤더 제어**: 오리진 서버로 전달되는 헤더 커스터마이징
- **디바이스/국가별 대응**: 요청 특성에 따른 맞춤 응답 설정
- **오리진 그룹**: 장애 조치를 위한 다중 오리진 설정

## 실무 활용

1. **웹사이트 가속화**:
    - 정적 웹사이트 콘텐츠를 CloudFront로 제공하여 전 세계 사용자 경험 개선
    - 동적 API 호출의 지연 시간 감소
2. **스트리밍 최적화**:
    - 고화질 비디오 스트리밍을 위한 최적화된 배포
    - 적응형 비트레이트 스트리밍 지원
3. **보안 강화**:
    - AWS WAF와 통합하여 웹 애플리케이션 보호
    - 지역 제한 기능으로 특정 국가에서만 콘텐츠 접근 허용
4. **개발 환경 최적화**:
    - 다양한 환경(개발, 테스트, 프로덕션)에 맞는 별도의 CloudFront 배포 구성
    - 배포 환경별 캐싱 전략 차별화

CloudFront는 단순한 콘텐츠 전송을 넘어, 성능 최적화, 보안 강화, 비용 효율성을 모두 고려한 완벽한 CDN 솔루션. 기존 웹 서버나 S3 버킷 앞에 CloudFront를 배치하는 것만으로도 글로벌 사용자에게 훨씬 더 빠르고 안전한 콘텐츠 전송이 가능.

